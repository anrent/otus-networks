# Развертывание коммутируемой сети с резервными каналами

## Задачи
#### Часть 1. Создание сети и настройка основных параметров устройства
#### Часть 2. Выбор корневого моста
#### Часть 3. Наблюдение за процессом выбора протоколом STP порта, исходя из стоимости портов
#### Часть 4. Наблюдение за процессом выбора протоколом STP порта, исходя из приоритета портов


## Часть 1:	Создание сети и настройка основных параметров устройства

Топология сети, построенная в Packet Tracer:

![Image alt](https://github.com/anrent/otus-networks/blob/main/labs/lab02/topo.PNG)

Команды предварительной настройки
```
enable
conf t
no ip domain-lookup                        //Отключение DNS lookup, чтобы устройство не пыталось преобразовать неправильно введенные команды, как если бы они были именами хостов.
service password-encryption                //Шифрование паролей     
hostname S2                                //R1 S1 соответственно
enable secret class                        //Включение запроса пароля для привелигированного режима
line console 0                             //Конфигурация консольной линии
password cisco                             //Пароль, запршиваемый при подключении к устройству через консоль
logging synchronous                        //Синхронизация консольных лог сообщений с вводом команд
exit
line vty 0 15                              //Конфигурация vty линий
login                                      //Необходимость ввода общего пароля
password cisco                             //Пароль, запршиваемый при подключении к устройству через vty линии
exit
banner motd "Hello there"                  //Баннер
interface vlan 1
ip address 192.168.1.1 255.255.255.0       //Адреса для S2 - .1 дял S3 - .3
exit
copy running-config startup-config         //сохранение конфигурации
```
Проверка работоспособности:

Доступность S2 от S1:

![Image alt](https://github.com/anrent/otus-networks/blob/main/labs/lab02/s1-s2.PNG)

Доступность S3 от S1:

![Image alt](https://github.com/anrent/otus-networks/blob/main/labs/lab02/s1-s3.PNG)

Доступность S3 от S2:

![Image alt](https://github.com/anrent/otus-networks/blob/main/labs/lab02/s2-s3.PNG)



## Часть 2:	Определение корневого моста

Для каждого экземпляра протокола spanning-tree (коммутируемая сеть LAN или широковещательный домен) существует коммутатор, выделенный в качестве корневого моста. Корневой мост служит точкой привязки для всех расчётов протокола spanning-tree, позволяя определить избыточные пути, которые следует заблокировать.
Процесс выбора определяет, какой из коммутаторов станет корневым мостом. Коммутатор с наименьшим значением идентификатора моста (BID) становится корневым мостом. Идентификатор BID состоит из значения приоритета моста, расширенного идентификатора системы и MAC-адреса коммутатора. Значение приоритета может находиться в диапазоне от 0 до 65535 с шагом 4096. По умолчанию используется значение 32768.
Используя построенную ранее топологию, были выполнены дополнительные шаги по настройке оборудования:

 * Отключены все порты на коммутаторах.
 * Настроены подключенные порты в качестве транковых.
 * Включены порты F0/2 и F0/4 на всех коммутаторах.
 * Выведены данные состояния протокола spanning-tree.
 
Ниже приведён вывод информации о состоянии протокола STP

Для коммутатора S1:

![Image alt](https://github.com/anrent/otus-networks/blob/main/labs/lab02/S1stp.PNG)


Для коммутатора S2:

![Image alt](https://github.com/anrent/otus-networks/blob/main/labs/lab02/S2stp.PNG)


Для коммутатора S3:

![Image alt](https://github.com/anrent/otus-networks/blob/main/labs/lab02/S3stp.PNG)


На схеме ниже наглядно указано состояние портов и root коммутатор:

![Image alt](https://github.com/anrent/otus-networks/blob/main/labs/lab02/STP-pt1.PNG)


